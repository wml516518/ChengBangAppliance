@model List<OrderItem>
@{
    var order = ViewBag.Order as Order;
    ViewData["Title"] = "订单详情";
    string StatusText(int s) => s switch { 0 => "待支付", 1 => "已支付", 2 => "已完成", 3 => "已取消", _ => "" };
    string PayMethodText(int m) => m switch { 1 => "微信支付", 2 => "支付宝", _ => "-" };
}
@if (order == null)
{
    <p>订单不存在</p>
}
else
{
<div class="card" style="padding:16px;">
    <div style="margin-bottom:12px;">订单号：<strong>@order.OrderNo</strong></div>
    <div style="margin-bottom:8px;">状态：<span style="color:#2563eb;">@StatusText(order.Status)</span></div>
    <div style="margin-bottom:8px;">联系人：@order.ContactName @order.ContactPhone</div>
    <div style="margin-bottom:8px;">支付方式：@PayMethodText(order.PaymentMethod)</div>
    @if (!string.IsNullOrEmpty(order.Address))
    { <div style="margin-bottom:8px;">地址：@order.Address</div> }
    @if (!string.IsNullOrEmpty(order.Remark))
    { <div style="margin-bottom:8px;">备注：@order.Remark</div> }
    <div style="margin-top:12px; padding-top:12px; border-top:1px solid #e5e7eb;">合计：<strong>¥@order.TotalAmount.ToString("F2")</strong></div>
</div>
<div class="card" style="padding:16px;">
    <div style="font-weight:600; margin-bottom:12px;">商品明细</div>
    @foreach (var item in Model)
    {
        <div style="display:flex; padding:8px 0; border-bottom:1px solid #f3f4f6;">
            <div style="width:50px; height:50px; flex-shrink:0; background:#f3f4f6; border-radius:6px;">
                @if (!string.IsNullOrEmpty(item.ImagePath))
                { <img src="@item.ImagePath" alt="" style="width:100%; height:100%; object-fit:cover; border-radius:6px;" /> }
            </div>
            <div style="flex:1; margin-left:10px; min-width:0;">
                <div>@item.ProductName</div>
                <div style="color:#6b7280; font-size:12px;">¥@item.Price.ToString("F2") × @item.Quantity</div>
            </div>
            <div>¥@item.Amount.ToString("F2")</div>
        </div>
    }
</div>
<a href="/Mobile/MyOrders" class="btn btn-secondary" style="display:block; text-align:center;">返回订单列表</a>
}
