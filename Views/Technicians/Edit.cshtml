@model User
@using ApplianceRepair.Services
@{
    ViewData["Title"] = "编辑用户";
    var error = ViewBag.Error as string;
    var roleCur = Model.IsAdmin ? 1 : (Model.IsTechnician ? 3 : 2);
}
<div class="card" style="max-width:400px;">
    <h2>编辑用户 —— @(Model.UserName)</h2>
    @if (!string.IsNullOrEmpty(error))
    {
        <div class="text-danger" style="margin-bottom:12px;">@error</div>
    }
    <form asp-action="Edit" method="post">
        <input type="hidden" name="id" value="@Model.Id" />
        <div class="form-group">
            <label>用户名</label>
            <input value="@Model.UserName" disabled style="background:#f3f4f6;cursor:not-allowed;" />
        </div>
        <div class="form-group">
            <label>姓名</label>
            <input name="realName" value="@(Model.RealName)" placeholder="真实姓名" />
        </div>
        <div class="form-group">
            <label>联系电话</label>
            <input name="phone" value="@(Model.Phone)" placeholder="手机号" />
        </div>
        <div class="form-group">
            <label>角色 <span class="text-danger">*</span></label>
            <select name="role" style="padding:8px; border:1px solid #d1d5db; border-radius:4px; max-width:400px;">
                @if (roleCur == 1) { <option value="1" selected>管理员</option> } else { <option value="1">管理员</option> }
                @if (roleCur == 2) { <option value="2" selected>用户</option> } else { <option value="2">用户</option> }
                @if (roleCur == 3) { <option value="3" selected>师傅</option> } else { <option value="3">师傅</option> }
            </select>
        </div>
        <div style="margin-top:20px; padding-top:16px; border-top:1px solid #e5e7eb;">
            <p style="font-size:13px; color:#6b7280; margin-bottom:12px;">如不需要修改密码，请留空</p>
            <div class="form-group">
                <label>新密码</label>
                <input type="password" name="newPassword" autocomplete="new-password" placeholder="留空则不修改" />
            </div>
            <div class="form-group">
                <label>确认新密码</label>
                <input type="password" name="confirmNewPassword" autocomplete="new-password" placeholder="再次输入新密码" />
            </div>
        </div>
        @Html.AntiForgeryToken()
        <button type="submit" class="btn btn-primary">保存</button>
        <a href="/Technicians" class="btn btn-secondary">取消</a>
    </form>
</div>
